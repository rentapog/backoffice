<div class="section">
    <div class="section" id="secret-vault-section">
        <h2>Admin: Secret Vault</h2>
        <form id="vault-unlock-form">
            <label for="vault-code">Enter 2-digit code to unlock:</label>
            <input type="password" id="vault-code" maxlength="2" style="width:40px;">
            <button type="submit"
                style="background:#001f5b;color:#fff;padding:6px 16px;border:none;border-radius:4px;font-weight:bold;">Unlock</button>
        </form>
        <div id="vault-content" style="display:none;margin-top:12px;"></div>
        <div id="vault-error" style="color:#e60000;margin-top:8px;"></div>
        <script>
            document.getElementById('vault-unlock-form').addEventListener('submit', async function (e) {
                e.preventDefault();
                const code = document.getElementById('vault-code').value;
                const errorDiv = document.getElementById('vault-error');
                const contentDiv = document.getElementById('vault-content');
                errorDiv.textContent = '';
                if (code !== '89') {
                    errorDiv.textContent = 'Incorrect code.';
                    contentDiv.style.display = 'none';
                    return;
                }
                // Fetch secrets from backend
                try {
                    const resp = await fetch('/vault', { method: 'POST', headers: { 'X-Requested-With': 'XMLHttpRequest' }, body: '' });
                    if (resp.ok) {
                        const data = await resp.text();
                        contentDiv.innerHTML = data;
                        contentDiv.style.display = 'block';
                    } else {
                        errorDiv.textContent = 'Could not load secrets.';
                    }
                } catch (err) {
                    errorDiv.textContent = 'Error: ' + err.message;
                }
            });
        </script>
    </div>
    <h2>Admin: Deploy to Fly.io</h2>
    <form id="deploy-form">
        <button type="submit"
            style="background:#e60000;color:#fff;padding:8px 20px;border:none;border-radius:4px;font-weight:bold;">Deploy
            Latest Version</button>
    </form>
    <div id="deploy-result" style="margin-top:10px;color:#007700;font-weight:bold;"></div>
    <script>
        document.getElementById('deploy-form').addEventListener('submit', async function (e) {
            e.preventDefault();
            const resultDiv = document.getElementById('deploy-result');
            resultDiv.textContent = 'Deploying...';
            try {
                const resp = await fetch('/deploy', {
                    method: 'POST',
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                });
                if (resp.ok) {
                    const data = await resp.text();
                    resultDiv.textContent = data;
                } else {
                    resultDiv.textContent = 'Error: Could not trigger deploy.';
                }
            } catch (err) {
                resultDiv.textContent = 'Error: ' + err.message;
            }
        });
    </script>
</div>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to RizzosAI</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
    <div class="container">
        <h1>Welcome to RizzosAI</h1>
        <p>Meet <b>Coey</b>, your friendly AI guide! Coey will take you step-by-step through setting up your own domain
            space, renting it out, and earning commissions. Whether you want to build, rent, or just explore, Coey is
            here to help you succeed.</p>
        <h2>How the RizzosAI Rental System Works</h2>
        <ul>
            <li><b>Own Your Space:</b> Register your domain and set up your digital space with help from Coey, our AI
                assistant.</li>
            <li><b>Rent It Out:</b> List your space for others to rent. You can earn commissions every time someone
                leases your domain space.</li>
            <li><b>Earn & Learn:</b> Coey will show you how to maximize your earnings, manage your listings, and even
                automate your rental process.</li>
            <li><b>Pass-Up System:</b> Every second leasee is automatically passed up to the admin. This helps keep the
                platform running and supports the community.</li>
            <li><b>Flexible Use:</b> You can use your space, rent it out, or even "live" in it—it's your choice!</li>
            <li><b>24/7 Support:</b> Need help? Our team is here for you around the clock—get support any time, day or
                night.</li>
        </ul>
        <p>Ready to get started? <a href="/signup">Sign up</a> and let Coey guide you to your first rental and
            commission!</p>
        <footer style="margin-top: 40px; color: #888;">
            &copy; 2025 RizzosAI. All rights reserved.
        </footer>
        <div class="ai-section">
            <h2>Ask Claude (AI Assistant)</h2>
            <form id="claude-form">
                <input type="text" id="claude_prompt" name="claude_prompt" placeholder="Ask anything..."
                    style="width:70%;padding:8px;border-radius:4px;border:1px solid #bbb;">
                <button type="submit"
                    style="background:#635bff;color:#fff;padding:6px 16px;border:none;border-radius:4px;font-weight:bold;">Ask</button>
            </form>
            <div class="ai-response" id="ai-response">Hey! How's it going? What can I help you with today?</div>
            <script>
                document.getElementById('claude-form').addEventListener('submit', async function (e) {
                    e.preventDefault();
                    const prompt = document.getElementById('claude_prompt').value;
                    const responseDiv = document.getElementById('ai-response');
                    responseDiv.textContent = 'Thinking...';
                    try {
                        const resp = await fetch(window.location.pathname, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded',
                                'X-Requested-With': 'XMLHttpRequest'
                            },
                            body: new URLSearchParams({ claude_prompt: prompt })
                        });
                        if (resp.ok) {
                            const data = await resp.text();
                            responseDiv.textContent = data;
                        } else {
                            responseDiv.textContent = 'Error: Could not get response.';
                        }
                    } catch (err) {
                        responseDiv.textContent = 'Error: ' + err.message;
                    }
                });
            </script>
        </div>
    </div>
</body>

</html>